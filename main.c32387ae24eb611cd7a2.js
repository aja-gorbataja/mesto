(()=>{"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleOpenPopup=s}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".elements__item-img"),this._cardTitle=this._element.querySelector(".elements__item-name"),this._cardLike=this._element.querySelector(".elements__item-like"),this._cardRemove=this._element.querySelector(".elements__item-trash"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._element}_handleLike(){this._cardLike.classList.toggle("elements__item-like_on")}_handleTrash(){this._element.remove()}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleOpenPopup(this._name,this._link)})),this._cardLike.addEventListener("click",(()=>{this._handleLike()})),this._cardRemove.addEventListener("click",(()=>{this._handleTrash()}))}}class t{constructor(e){this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup-close")}openPopup(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}closePopup(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.closePopup()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.closePopup()})),this._popup.addEventListener("mousedown",(e=>{e.currentTarget===e.target&&this.closePopup()}))}}class s extends t{constructor(e,{formSubmit:t}){super(e),this._formSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._formSubmit(this._getInputValues()),this.closePopup()})),super.setEventListeners()}closePopup(){super.closePopup(),this._form.reset()}}class n{constructor(e,t){this._config=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);t.classList.remove(this._config.errorClass),t.textContent="",e.classList.remove(this._config.inputErrorClass)}_showInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);t.classList.add(this._config.errorClass),t.textContent=e.validationMessage,e.classList.add(this._config.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?this.disableButton():(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}deleteErrors(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}disableButton(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}enableValidation(){this._setEventListeners()}}document.querySelector(".form__input-name"),document.querySelector(".form__input-description");const i=document.querySelector(".profile__info-edit"),r=document.querySelector(".profile__add"),o=new class{constructor({data:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}renderItem(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({data:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{const t=_(e);o.addItem(t)}},".elements"),l=new class{constructor({name:e,info:t}){this._name=document.querySelector(e),this._info=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,info:this._info.textContent}}setUserInfo(e){this._name.textContent=e.name,this._info.textContent=e.info}}({name:".profile__info-name",info:".profile__info-description"}),a=new class extends t{constructor(e){super(e),this._imgFull=this._popup.querySelector(".img__full"),this._imgTitle=this._popup.querySelector(".img__title")}openPopup(e,t){super.openPopup(),this._imgFull.src=t,this._imgFull.alt=e,this._imgTitle.textContent=e}}(".popup_img"),p=new s(".popup_edit",{formSubmit:e=>{l.setUserInfo(e)}}),u=new s(".popup_add",{formSubmit:e=>{!function(e){const t=_(e);o.addItem(t)}(e)}});function c(e,t){a.openPopup(e,t)}function _(t){return new e(t,".item",c).generateCard()}i.addEventListener("click",(()=>{p.setInputValues(l.getUserInfo()),d["form-edit"].deleteErrors(),d["form-edit"].disableButton(),p.openPopup()})),o.renderItem(),p.setEventListeners(),u.setEventListeners(),a.setEventListeners();const d={};var h;h={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},Array.from(document.querySelectorAll(h.formSelector)).forEach((e=>{const t=new n(h,e),s=e.getAttribute("name");d[s]=t,t.enableValidation()})),r.addEventListener("click",(()=>{d["form-add"].deleteErrors(),d["form-add"].disableButton(),u.openPopup()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUZhLElBQUl4RyxFQUFLd0csRUFBTSxRQUFTcEcsR0FDWmEsY0FFM0IsQ0FPQTJFLEVBQWU1RCxpQkFBaUIsU0FBUyxLQUN2Q21GLEVBQVV4RCxlQUFlZ0QsRUFBU0csZUFDbENRLEVBQWUsYUFBYTVCLGVBQzVCNEIsRUFBZSxhQUFhL0IsZ0JBQzVCNEIsRUFBVTlFLFdBQVcsSUFLdkJ5RCxFQUFTUyxhQUVUWSxFQUFVdkUsb0JBRVZ3RSxFQUFTeEUsb0JBRVRvRSxFQUFXcEUsb0JBR1gsTUFBTTBFLEVBQWlCLENBQUMsRUFFRUMsUUU5Q00sQ0FDOUJDLGFBQWMsZUFDZG5ELGNBQWUsZ0JBQ2ZFLHFCQUFzQixpQkFDdEJpQixvQkFBcUIseUJBQ3JCWCxnQkFBaUIsMEJBQ2pCRCxXQUFZLDhCRnlDS1QsTUFBTUMsS0FBS3ZELFNBQVN3QyxpQkFBaUJrRSxFQUFpQkMsZUFDOURoRSxTQUFTUSxJQUNoQixNQUFNeUQsRUFBWSxJQUFJM0QsRUFBZXlELEVBQWtCdkQsR0FDakQwRCxFQUFXMUQsRUFBWTJELGFBQWEsUUFDMUNMLEVBQWVJLEdBQVlELEVBQzNCQSxFQUFVOUIsa0JBQWtCLElBTWhDRSxFQUFjN0QsaUJBQWlCLFNBQVMsS0FDdENzRixFQUFlLFlBQVk1QixlQUMzQjRCLEVBQWUsWUFBWS9CLGdCQUMzQjZCLEVBQVMvRSxXQUFXLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvZGF0YS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVPcGVuUG9wdXApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVPcGVuUG9wdXAgPSBoYW5kbGVPcGVuUG9wdXA7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0nKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0taW1nJyk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faXRlbS1uYW1lJyk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pdGVtLWxpa2UnKTtcclxuICAgIHRoaXMuX2NhcmRSZW1vdmUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faXRlbS10cmFzaCcpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudHNfX2l0ZW0tbGlrZV9vbicpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVRyYXNoKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlT3BlblBvcHVwKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRSZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJcclxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLWNsb3NlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW4nKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IGV2dC50YXJnZXQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIHtmb3JtU3VibWl0fSkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICB9XHJcbiAgXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICB0aGlzLl9mb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICBzdXBlci5jbG9zZVBvcHVwKClcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbiB9IiwiXHJcbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XHJcbiAgY29uc3RydWN0b3IgKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVFcnJvcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vL3RoaXMuX2RlbGV0ZUVycm9ycygpOyIsIlxyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IHsgZWxlbWVudHNBcnJheSwgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2RhdGEuanMnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBTZWN0aW9uICBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgVXNlckluZm8gIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5cclxuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0LW5hbWUnKTtcclxuY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dC1kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBidXR0b25FZGl0T3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvLWVkaXQnKTtcclxuY29uc3QgYnV0dG9uQWRkT3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQnKTtcclxuXHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBkYXRhOiBlbGVtZW50c0FycmF5LFxyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gIH1cclxufSwgJy5lbGVtZW50cycpO1xyXG5cclxuY29uc3QgdXNlckVkaXQgPSBuZXcgVXNlckluZm8oe25hbWU6ICcucHJvZmlsZV9faW5mby1uYW1lJywgaW5mbzogJy5wcm9maWxlX19pbmZvLWRlc2NyaXB0aW9uJ30pO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX2ltZycpO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9lZGl0Jywge1xyXG4gIGZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICB1c2VyRWRpdC5zZXRVc2VySW5mbyhkYXRhKTtcclxuICB9fSk7XHJcblxyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfYWRkJywge1xyXG4gIGZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XHJcbiAgICBhZGRDYXJkKGl0ZW0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVPcGVuUG9wdXAgKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cEltYWdlLm9wZW5Qb3B1cChuYW1lLCBsaW5rKVxyXG59IFxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sICcuaXRlbScsIGhhbmRsZU9wZW5Qb3B1cCk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuIGZ1bmN0aW9uIGFkZENhcmQoaXRlbSkge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XHJcbn1cclxuXHJcbmJ1dHRvbkVkaXRPcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwRWRpdC5zZXRJbnB1dFZhbHVlcyh1c2VyRWRpdC5nZXRVc2VySW5mbygpKTtcclxuICBmb3JtVmFsaWRhdG9yc1snZm9ybS1lZGl0J10uZGVsZXRlRXJyb3JzKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbJ2Zvcm0tZWRpdCddLmRpc2FibGVCdXR0b24oKTtcclxuICBwb3B1cEVkaXQub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5jYXJkTGlzdC5yZW5kZXJJdGVtKCk7XHJcblxyXG5wb3B1cEVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnBvcHVwQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAodmFsaWRhdGlvbkNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KVxyXG59XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuYnV0dG9uQWRkT3Blbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1snZm9ybS1hZGQnXS5kZWxldGVFcnJvcnMoKTtcclxuICBmb3JtVmFsaWRhdG9yc1snZm9ybS1hZGQnXS5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgcG9wdXBBZGQub3BlblBvcHVwKCk7XHJcbn0pOyIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gZGF0YTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcclxuICAgIH0pXHJcbiAgfVxyXG59IiwiXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c0FycmF5ID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gIH1cclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xyXG59OyIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioe25hbWUsIGluZm99KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcclxuICAgIHRoaXMuX2luZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGluZm8pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgIHJldHVybiB7XHJcbiAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgaW5mbzogdGhpcy5faW5mby50ZXh0Q29udGVudFxyXG4gIH1cclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbmZvLnRleHRDb250ZW50ID0gZGF0YS5pbmZvO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2ltZ0Z1bGwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuaW1nX19mdWxsJyk7XHJcbiAgICB0aGlzLl9pbWdUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5pbWdfX3RpdGxlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuUG9wdXAobmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbiAgICB0aGlzLl9pbWdGdWxsLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWdGdWxsLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWdUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlT3BlblBvcHVwIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZU9wZW5Qb3B1cCIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2NhcmRMaWtlIiwiX2NhcmRSZW1vdmUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVMaWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2hhbmRsZVRyYXNoIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfY2xvc2VCdXR0b24iLCJvcGVuUG9wdXAiLCJhZGQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0Iiwic3VwZXIiLCJfZm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiRm9ybVZhbGlkYXRpb24iLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9oaWRlSW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJkZWxldGVFcnJvcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwiYnV0dG9uRWRpdE9wZW4iLCJidXR0b25BZGRPcGVuIiwiY2FyZExpc3QiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbSIsIml0ZW0iLCJuZXdDYXJkIiwiY3JlYXRlQ2FyZCIsInVzZXJFZGl0IiwiaW5mbyIsIl9pbmZvIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwSW1hZ2UiLCJfaW1nRnVsbCIsIl9pbWdUaXRsZSIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwiYWRkQ2FyZCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==